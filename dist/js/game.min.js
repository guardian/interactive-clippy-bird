!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require){"use strict";var BootState=require("./states/boot"),MenuState=require("./states/menu"),PlayState=require("./states/play"),PreloadState=require("./states/preload"),width=document.querySelector("#clippy-bird").clientWidth,game=new Phaser.Game(width,505,Phaser.AUTO,"clippy-bird");game.state.add("boot",BootState),game.state.add("menu",MenuState),game.state.add("play",PlayState),game.state.add("preload",PreloadState),game.state.start("boot")},{"./states/boot":7,"./states/menu":8,"./states/play":9,"./states/preload":10}],2:[function(require,module){"use strict";var Bird=function(game,x,y,frame){Phaser.Sprite.call(this,game,x,y,"bird",frame),this.anchor.setTo(.5,.5),this.animations.add("flap"),this.animations.play("flap",12,!0),this.flapSound=this.game.add.audio("flap"),this.name="bird",this.alive=!1,this.onGround=!1,this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.collideWorldBounds=!0,this.events.onKilled.add(this.onKilled,this)};Bird.prototype=Object.create(Phaser.Sprite.prototype),Bird.prototype.constructor=Bird,Bird.prototype.update=function(){this.angle<90&&this.alive&&(this.angle+=2.5),this.alive||(this.body.velocity.x=0)},Bird.prototype.flap=function(){this.alive&&(this.flapSound.play(),this.body.velocity.y=-400,this.game.add.tween(this).to({angle:-40},100).start())},Bird.prototype.revived=function(){},Bird.prototype.onKilled=function(){this.exists=!0,this.visible=!0,this.animations.stop();var duration=90/this.y*300;this.game.add.tween(this).to({angle:90},duration).start(),console.log("killed"),console.log("alive:",this.alive)},module.exports=Bird},{}],3:[function(require,module){"use strict";var Ground=function(game,x,y,width,height){Phaser.TileSprite.call(this,game,x,y,width,height,"ground"),this.autoScroll(-200,0),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0};Ground.prototype=Object.create(Phaser.TileSprite.prototype),Ground.prototype.constructor=Ground,Ground.prototype.update=function(){},module.exports=Ground},{}],4:[function(require,module){"use strict";var Pipe=function(game,x,y,frame){Phaser.Sprite.call(this,game,x,y,"pipe",frame),this.anchor.setTo(.5,.5),this.game.physics.arcade.enableBody(this),this.body.allowGravity=!1,this.body.immovable=!0};Pipe.prototype=Object.create(Phaser.Sprite.prototype),Pipe.prototype.constructor=Pipe,Pipe.prototype.update=function(){},module.exports=Pipe},{}],5:[function(require,module){"use strict";var Pipe=require("./pipe"),PipeGroup=function(game,parent){Phaser.Group.call(this,game,parent),this.topPipe=new Pipe(this.game,0,0,0),this.bottomPipe=new Pipe(this.game,0,440,1),this.add(this.topPipe),this.add(this.bottomPipe),this.hasScored=!1,this.setAll("body.velocity.x",-200)};PipeGroup.prototype=Object.create(Phaser.Group.prototype),PipeGroup.prototype.constructor=PipeGroup,PipeGroup.prototype.update=function(){this.checkWorldBounds()},PipeGroup.prototype.checkWorldBounds=function(){this.topPipe.inWorld||(this.exists=!1)},PipeGroup.prototype.reset=function(x,y){this.topPipe.reset(0,0),this.bottomPipe.reset(0,440),this.x=x,this.y=y,this.setAll("body.velocity.x",-200),this.hasScored=!1,this.exists=!0},PipeGroup.prototype.stop=function(){this.setAll("body.velocity.x",0)},module.exports=PipeGroup},{"./pipe":4}],6:[function(require,module){"use strict";var Scoreboard=function(game){var gameover;Phaser.Group.call(this,game),gameover=this.create(this.game.width/2,100,"gameover"),gameover.anchor.setTo(.5,.5),this.scoreboard=this.create(this.game.width/2,200,"scoreboard"),this.scoreboard.anchor.setTo(.5,.5),this.scoreText=this.game.add.bitmapText(this.game.width/2+62,180,"flappyfont","",18),this.add(this.scoreText),this.bestText=this.game.add.bitmapText(this.game.width/2+62,230,"flappyfont","",18),this.add(this.bestText),this.startButton=this.game.add.button(this.game.width/2,300,"startButton",this.startClick,this),this.startButton.anchor.setTo(.5,.5),this.add(this.startButton),this.y=this.game.height,this.x=0};Scoreboard.prototype=Object.create(Phaser.Group.prototype),Scoreboard.prototype.constructor=Scoreboard,Scoreboard.prototype.show=function(score){var coin,bestScore;if(this.scoreText.setText(score.toString()),localStorage?(bestScore=localStorage.getItem("bestScore"),(!bestScore||score>bestScore)&&(bestScore=score,localStorage.setItem("bestScore",bestScore))):bestScore="N/A",this.bestText.setText(bestScore.toString()),score>=10&&20>score?coin=this.game.add.sprite(-65,7,"medals",1):score>=20&&(coin=this.game.add.sprite(-65,7,"medals",0)),this.game.add.tween(this).to({y:0},1e3,Phaser.Easing.Bounce.Out,!0),coin){coin.anchor.setTo(.5,.5),this.scoreboard.addChild(coin);var emitter=this.game.add.emitter(coin.x,coin.y,400);this.scoreboard.addChild(emitter),emitter.width=coin.width,emitter.height=coin.height,emitter.makeParticles("particle"),emitter.setRotation(-100,100),emitter.setXSpeed(0,0),emitter.setYSpeed(0,0),emitter.minParticleScale=.25,emitter.maxParticleScale=.5,emitter.setAll("body.allowGravity",!1),emitter.start(!1,1e3,1e3)}},Scoreboard.prototype.startClick=function(){this.game.state.start("play")},Scoreboard.prototype.update=function(){},module.exports=Scoreboard},{}],7:[function(require,module){"use strict";function Boot(){}Boot.prototype={preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,Phaser.Canvas.setTouchAction(this.game.canvas,"auto"),this.game.state.start("preload")}},module.exports=Boot},{}],8:[function(require,module){"use strict";function Menu(){}Menu.prototype={preload:function(){},create:function(){this.game.input.touch.preventDefault=!1,this.background=this.game.add.tileSprite(0,0,this.game.width,505,"background"),this.background.autoScroll(-30,0),this.ground=this.game.add.tileSprite(0,400,this.game.width,112,"ground"),this.ground.autoScroll(-200,0),this.titleGroup=this.game.add.group(),this.title=this.add.sprite(this.game.width/2-120,0,"title"),this.titleGroup.add(this.title),this.bird=this.add.sprite(this.game.width/2-160,5,"bird"),this.titleGroup.add(this.bird),this.bird.animations.add("flap"),this.bird.animations.play("flap",12,!0),this.titleGroup.x=30,this.titleGroup.y=100,this.game.add.tween(this.titleGroup).to({y:115},350,Phaser.Easing.Linear.NONE,!0,0,1e3,!0),this.startButton=this.game.add.button(this.game.width/2,300,"startButton",this.startClick,this),this.startButton.anchor.setTo(.5,.5)},startClick:function(){this.game.state.start("play")}},module.exports=Menu},{}],9:[function(require,module){"use strict";function Play(){}var Bird=require("../prefabs/bird"),Ground=require("../prefabs/ground"),Pipe=require("../prefabs/pipe"),PipeGroup=require("../prefabs/pipeGroup"),Scoreboard=require("../prefabs/scoreboard");Play.prototype={create:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=1200,this.background=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"background"),this.background.autoScroll(-30,0),this.pipes=this.game.add.group(),this.bird=new Bird(this.game,this.game.width/2-100,this.game.height/2),this.game.add.existing(this.bird),this.ground=new Ground(this.game,0,400,this.game.width,112),this.game.add.existing(this.ground),this.flapKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.flapKey.onDown.addOnce(this.startGame,this),this.flapKey.onDown.add(this.bird.flap,this.bird),this.game.input.onDown.addOnce(this.startGame,this),this.game.input.onDown.add(this.bird.flap,this.bird),this.game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]),this.score=0,this.scoreText=this.game.add.bitmapText(this.game.width/2,10,"flappyfont",this.score.toString(),24),this.instructionGroup=this.game.add.group(),this.instructionGroup.add(this.game.add.sprite(this.game.width/2,100,"getReady")),this.instructionGroup.add(this.game.add.sprite(this.game.width/2,325,"instructions")),this.instructionGroup.setAll("anchor.x",.5),this.instructionGroup.setAll("anchor.y",.5),this.pipeGenerator=null,this.gameover=!1,this.pipeHitSound=this.game.add.audio("pipeHit"),this.groundHitSound=this.game.add.audio("groundHit"),this.scoreSound=this.game.add.audio("score")},update:function(){this.game.physics.arcade.collide(this.bird,this.ground,this.deathHandler,null,this),this.gameover||this.pipes.forEach(function(pipeGroup){this.checkScore(pipeGroup),this.game.physics.arcade.collide(this.bird,pipeGroup,this.deathHandler,null,this)},this)},shutdown:function(){this.game.input.keyboard.removeKey(Phaser.Keyboard.SPACEBAR),this.bird.destroy(),this.pipes.destroy(),this.scoreboard.destroy()},startGame:function(){this.game.input.touch.preventDefault=!0,this.bird.alive||this.gameover||(this.bird.body.allowGravity=!0,this.bird.alive=!0,this.pipeGenerator=this.game.time.events.loop(1.25*Phaser.Timer.SECOND,this.generatePipes,this),this.pipeGenerator.timer.start(),this.instructionGroup.destroy())},checkScore:function(pipeGroup){pipeGroup.exists&&!pipeGroup.hasScored&&pipeGroup.topPipe.world.x<=this.bird.world.x&&(pipeGroup.hasScored=!0,this.score++,this.scoreText.setText(this.score.toString()),this.scoreSound.play())},deathHandler:function(bird,enemy){this.game.input.touch.preventDefault=!1,enemy instanceof Ground&&!this.bird.onGround?(this.groundHitSound.play(),this.scoreboard=new Scoreboard(this.game),this.game.add.existing(this.scoreboard),this.scoreboard.show(this.score),this.bird.onGround=!0):enemy instanceof Pipe&&this.pipeHitSound.play(),this.gameover||(this.gameover=!0,this.bird.kill(),this.pipes.callAll("stop"),this.pipeGenerator.timer.stop(),this.ground.stopScroll(),this.background.stopScroll())},generatePipes:function(){var pipeY=this.game.rnd.integerInRange(-100,100),pipeGroup=this.pipes.getFirstExists(!1);pipeGroup||(pipeGroup=new PipeGroup(this.game,this.pipes)),pipeGroup.reset(this.game.width,pipeY)}},module.exports=Play},{"../prefabs/bird":2,"../prefabs/ground":3,"../prefabs/pipe":4,"../prefabs/pipeGroup":5,"../prefabs/scoreboard":6}],10:[function(require,module){"use strict";function Preload(){this.asset=null,this.ready=!1}Preload.prototype={preload:function(){this.asset=this.add.sprite(this.width/2,this.height/2,"preloader"),this.asset.anchor.setTo(.5,.5),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.load.setPreloadSprite(this.asset),this.load.image("background","assets/background.png"),this.load.image("ground","assets/ground.png"),this.load.image("title","assets/title.png"),this.load.spritesheet("bird","assets/clipman.png",23,24,3),this.load.spritesheet("pipe","assets/pipes.png",54,320,2),this.load.image("startButton","assets/start-button.png"),this.load.image("instructions","assets/instructions.png"),this.load.image("getReady","assets/get-ready.png"),this.load.image("scoreboard","assets/scoreboard.png"),this.load.spritesheet("medals","assets/medals.png",44,46,2),this.load.image("gameover","assets/gameover.png"),this.load.image("particle","assets/particle.png"),this.load.audio("flap",["assets/flap.mp3","assets/flap.ogg"]),this.load.audio("pipeHit",["assets/pipe-hit.mp3","assets/pipe-hit.ogg"]),this.load.audio("groundHit",["assets/ground-hit.mp3","assets/ground-hit.ogg"]),this.load.audio("score",["assets/score.mp3","assets/score.ogg"]),this.load.audio("ouch",["assets/ouch.mp3","assets/ouch.ogg"]),this.load.bitmapFont("flappyfont","assets/fonts/flappyfont/flappyfont.png","assets/fonts/flappyfont/flappyfont.fnt")},create:function(){this.asset.cropEnabled=!1},update:function(){this.ready&&this.game.state.start("menu")},onLoadComplete:function(){this.ready=!0}},module.exports=Preload},{}]},{},[1]);